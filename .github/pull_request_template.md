## 概要

<!-- このPRが何をするのか、簡潔に説明してください -->

## 変更の種類

<!-- 該当するものにチェックを入れてください -->

- [ ] 🐛 バグ修正（既存機能の不具合修正）
- [ ] ✨ 新機能（新しい機能の追加）
- [ ] 📝 ドキュメント（ドキュメントのみの変更）
- [ ] 🎨 スタイル（コードの動作に影響しないフォーマット、空白等の変更）
- [ ] ♻️ リファクタリング（バグ修正や機能追加を伴わないコード変更）
- [ ] ⚡ パフォーマンス改善
- [ ] 🔥 PyTorch/CUDA関連（GPU機能、モデル等）
- [ ] 🧪 テンプレート改善（Jinja2テンプレート、copier.yml等の変更）
- [ ] 🔧 設定変更（pyproject.toml、flake.nix、GitHub Actions等の設定変更）
- [ ] 🔨 ビルド・CI/CD関連

## 関連Issue

<!-- このPRが解決するIssueがあれば記載してください -->

Closes #<!-- Issue番号 -->

## 変更内容の詳細

<!-- 何を変更したか、詳細に記載してください -->

### 変更したファイル

- `ファイルパス`: 変更内容の説明

### テンプレートへの影響

<!-- この変更が生成されるプロジェクトにどう影響するか記載してください -->

- [ ] 生成されるファイル構造に変更あり
- [ ] pyproject.tomlの生成内容に変更あり
- [ ] flake.nixのCUDA設定に変更あり
- [ ] CI/CDワークフローに変更あり
- [ ] copier.ymlの質問項目に変更あり
- [ ] 影響なし（ドキュメントのみ等）

### 破壊的変更

<!-- 既存のテンプレート利用者に影響する変更がある場合はチェックしてください -->

- [ ] はい（詳細を以下に記載）
- [ ] いいえ

<!-- 破壊的変更の詳細 -->
```
```

## テスト方法

<!-- このPRの変更をどのようにテストしたか記載してください -->

### テンプレート生成テスト

```bash
# ベーステンプレートの生成
uvx copier copy /path/to/uv-nix-template test-project
cd test-project

# PyTorch拡張の適用
uvx copier copy /path/to/uv-torch-nix-template .

# Nix環境の構築
direnv allow

# テスト項目
# - [ ] プロジェクトが正常に生成される
# - [ ] uv syncが成功する
# - [ ] PyTorchがインストールされる
# - [ ] pytestが実行できる
# - [ ] ruff checkが通る
# - [ ] CUDA情報が取得できる（GPU環境の場合）
```

### GPU動作確認（GPU環境がある場合）

```bash
# CUDA動作確認
uv run python -c "import torch; print(f'CUDA: {torch.cuda.is_available()}')"

# GPU上でのテスト実行
uv run pytest -v
```

### 動作確認環境

- OS: <!-- e.g. Ubuntu 22.04, NixOS 24.05 -->
- Copier version: <!-- e.g. 9.0.0 -->
- uv version: <!-- e.g. 0.4.0 -->
- Python version: <!-- e.g. 3.12.0 -->
- NVIDIA Driver: <!-- e.g. 550.90.07 (GPU環境の場合) -->
- GPU: <!-- e.g. RTX 4090 (GPU環境の場合) -->

## スクリーンショット（該当する場合）

<!-- UIや出力の変更がある場合はスクリーンショットを添付してください -->

## チェックリスト

<!-- 以下の項目をすべて確認してください -->

### コード品質

- [ ] コードは読みやすく、適切にコメントされている
- [ ] Jinja2テンプレートの構文エラーがない
- [ ] YAMLファイルの構文エラーがない
- [ ] 変更に対応するドキュメントを更新した

### テンプレート検証

- [ ] ローカルでcopierを使ってテンプレート生成をテストした
- [ ] 生成されたプロジェクトで`uv sync`が成功することを確認した
- [ ] 生成されたプロジェクトで基本的なコマンド（pytest, ruff等）が動作することを確認した
- [ ] 複数の質問パターン（異なるCUDAバージョン、PyTorchバージョン等）でテストした
- [ ] GPU環境で動作確認した（可能な場合）

### NixOS対応

- [ ] NixOS環境でテストした（NixOSユーザーの場合）
- [ ] flake.nixの変更がある場合、`nix develop`が成功することを確認した
- [ ] CUDA関連の環境変数が正しく設定されることを確認した

### 下位互換性

- [ ] 既存のテンプレート利用者への影響を検討した
- [ ] 破壊的変更がある場合、移行ガイドを記載した

### ドキュメント

- [ ] README.mdを更新した（必要な場合）
- [ ] docs/NIX_SETUP.mdを更新した（NixOS関連の変更の場合）
- [ ] docs/CUDA_SETUP.mdを更新した（PyTorch/CUDA関連の変更の場合）
- [ ] コード内のコメントを適切に更新した
- [ ] 新機能の使用例を追加した（該当する場合）

## レビュワーへのメモ

<!-- レビュワーに特に注目してほしい点や、質問があれば記載してください -->

---

**レビューありがとうございます！** 🙏

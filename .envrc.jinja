# .envrc - direnv configuration for automatic Nix environment loading
#
# このファイルにより、プロジェクトディレクトリに `cd` した瞬間に
# PyTorch/CUDA開発環境が自動的にアクティベートされます。
#
# 必要なツール:
#   - direnv (https://direnv.net/)
#   - nix-direnv (高速化のため推奨)
#
# セットアップ:
#   1. direnvをインストール
#   2. シェル設定ファイル（~/.bashrc or ~/.zshrc）に以下を追加:
#      eval "$(direnv hook bash)"  # bashの場合
#      eval "$(direnv hook zsh)"   # zshの場合
#   3. このディレクトリで: direnv allow
#
# NixOSユーザー:
#   - docs/NIX_SETUP.md を必ず参照してください
#   - /etc/nixos/configuration.nix でNVIDIAドライバーとnix-ldの有効化が必要です
#

# nix-direnvを使ってキャッシュを効かせ、環境構築を高速化
if ! has nix_direnv_version || ! nix_direnv_version 3.0.4; then
    source_url "https://raw.githubusercontent.com/nix-community/nix-direnv/3.0.4/direnvrc" \
        "sha256-DzlYZ33mWF/Gs8DDeyjr8mnVmQGx7ASYqA5WlxwvBG4="
fi

# Nix Flakesを使用（CUDA環境を含む）
use flake

# .envファイルが存在する場合は読み込む
if [ -f .env ]; then
    dotenv .env
fi
